# Easy Call AI 开发原则 (AGENT.md)

作为本项目的 AI 开发助手，在编写代码和设计系统时应遵循以下原则：

## 1. Rust 最佳实践
- **安全性**: 优先使用安全代码，除非绝对必要（如底层系统调用），否则避免使用 `unsafe`。
- **错误处理**:
    - 避免使用 `unwrap()` 或 `expect()`，除非在测试代码或确定不会失败的场景中。
    - 使用 `Result` 和 `Option` 进行显式错误处理。
    - 推荐使用 `thiserror` 或 `anyhow` 来管理错误。
- **所有权与借用**: 遵循 Rust 的所有权模型，尽量减少不必要的克隆 (`clone()`)。
- **代码风格**: 遵循 `cargo fmt` 和 `clippy` 的建议。

## 2. 项目特定原则
- **轻量化**: 保持 GUI 响应迅速，避免在主线程进行耗时的网络请求或图像处理（使用 `tokio` 或线程池）。
- **模块化**:
    - 截图逻辑、AI 通信、UI 渲染应解耦。
    - 核心逻辑应尽量与 `egui` 框架解耦，便于后续可能的框架迁移。
- **用户隐私**: 截图仅保存在内存中或临时目录，除非用户明确要求，否则不应持久化存储截图文件。
- **配置安全**: API Key 等敏感信息应妥善处理，不应硬编码在代码中。

## 3. 协作规范
- **代码注释**: 关键逻辑和复杂的算法应附带清晰的中文注释。
- **提交信息**: 遵循清晰的提交规范（如：`feat:`, `fix:`, `docs:`, `refactor:`）。
- **增量开发**: 每次修改应保持功能完整且可编译，避免大规模破坏性改动。

## 4. 目录结构规范
- **`src/`**: 存放所有 Rust 源代码。
- **`plan/`**: 存放开发计划和任务分解文档（如 `plan.md`）。
- **`docs/`**: 存放项目文档、设计说明和用户指南。

## 5. 交互设计
- **响应式**: 确保在不同分辨率的 Windows 屏幕上显示正常。
- **反馈**: 截图成功、发送中、AI 回复中应有明确的 UI 状态提示。
